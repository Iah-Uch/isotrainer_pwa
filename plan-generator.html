<!DOCTYPE html>
<html lang="pt-BR" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IsoTrainer - Gerador de Periodização</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="/assets/css/plan-generator.css">
  <style>
    /* Masked native date input so we can show dd/mm/yyyy while keeping system picker */
    .date-wrap { position: relative; }
    .date-wrap .date-mask {
      position: absolute;
      left: 0.75rem;            /* matches px-3 */
      right: 2.25rem;           /* room for calendar icon on some UAs */
      top: 50%;
      transform: translateY(-50%);
      pointer-events: none;     /* clicks go to the real input */
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      color: #e5e7eb;           /* slate-200-ish to match theme */
      font-size: inherit;
      line-height: 1.5rem;      /* approximates input height for vertical centering */
    }
    /* Hide the UA-rendered date text but keep the control & picker */
    input.date-masked {
      color: transparent;
      caret-color: transparent;
      -webkit-text-fill-color: transparent; /* Safari */
    }
    /* Make sure the calendar icon remains visible where applicable */
    input.date-masked::-webkit-calendar-picker-indicator {
      opacity: 1;
      cursor: pointer;
    }
    /* Improve focus outline since text is transparent */
    input.date-masked:focus {
      outline: 2px solid #f59e0b; /* amber-500 */
      outline-offset: 1px;
    }
  </style>
</head>
<body class="p-4 md:p-8 pb-24">
  <div class="max-w-6xl mx-auto">
    <!-- Header -->
    <div class="card rounded-2xl p-6 mb-6">
      <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-4">
        <div>
          <h1 class="text-3xl font-bold text-amber-500 mb-2">Gerador de Periodização</h1>
          <p class="text-slate-300">Configure e gere planos de treinamento personalizados com base em mesociclos científicos</p>
        </div>
        <a href="/app.html" class="btn-primary px-6 py-3 rounded-xl font-medium flex items-center gap-2 hover:bg-amber-600 transition-colors whitespace-nowrap">
          Abrir IsoTrainer
        </a>
      </div>
    </div>

    <!-- Main Form -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <!-- Left Column: Basic Info -->
      <div class="card rounded-2xl p-6">
        <h2 class="text-xl font-semibold text-amber-500 mb-4">Informações Básicas</h2>
        
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-slate-300 mb-1">Nome do Cliente *</label>
            <input type="text" id="clientName" class="input-field w-full rounded-lg px-3 py-2" 
                   placeholder="Ex: João Silva" required>
          </div>

          <div>
            <label class="block text-sm font-medium text-slate-300 mb-1">Força Máxima Média (kgf) *</label>
            <input type="number" id="maxForce" class="input-field w-full rounded-lg px-3 py-2" 
                   placeholder="Ex: 45.5" step="0.1" min="1" required>
            <p class="text-xs text-slate-400 mt-1">Média da força máxima isométrica do cliente</p>
          </div>

          <div>
            <label class="block text-sm font-medium text-slate-300 mb-1">Idade</label>
            <input type="number" id="age" class="input-field w-full rounded-lg px-3 py-2" 
                   placeholder="Ex: 35" min="10" max="120">
            <p class="text-xs text-slate-400 mt-1">Opcional - para ajustes de intensidade</p>
          </div>

          <div>
            <label class="block text-sm font-medium text-slate-300 mb-1">Data da Primeira Sessão *</label>
            <div class="date-wrap">
              <input type="date" id="startDate" class="input-field w-full rounded-lg px-3 py-2 date-masked" required aria-label="Data da Primeira Sessão">
              <span id="startDateMask" class="date-mask">dd/mm/aaaa</span>
            </div>
            <p class="text-xs text-slate-400 mt-1">Selecione a data de início do plano</p>
          </div>

          <div>
            <label class="block text-sm font-medium text-slate-300 mb-1">Duração Total (dias) *</label>
            <input type="number" id="totalDays" class="input-field w-full rounded-lg px-3 py-2" 
                   placeholder="Ex: 84" min="7" required>
            <p class="text-xs text-slate-400 mt-1">Duração total do plano em dias</p>
          </div>
        </div>
      </div>

      <!-- Right Column: Training Days -->
      <div class="card rounded-2xl p-6">
        <h2 class="text-xl font-semibold text-amber-500 mb-4">Dias de Treino</h2>
        
        <p class="text-sm text-slate-300 mb-3">Selecione os dias da semana disponíveis para treino:</p>
        
        <div class="space-y-2">
          <label class="flex items-center gap-2 p-3 rounded-lg bg-[#0b0b0c] border border-[#2a2a2a] hover:border-amber-600 cursor-pointer transition">
            <input type="checkbox" id="day0" value="0" class="accent-amber-600 w-4 h-4">
            <span class="text-slate-200">Domingo</span>
          </label>
          <label class="flex items-center gap-2 p-3 rounded-lg bg-[#0b0b0c] border border-[#2a2a2a] hover:border-amber-600 cursor-pointer transition">
            <input type="checkbox" id="day1" value="1" class="accent-amber-600 w-4 h-4" checked>
            <span class="text-slate-200">Segunda-feira</span>
          </label>
          <label class="flex items-center gap-2 p-3 rounded-lg bg-[#0b0b0c] border border-[#2a2a2a] hover:border-amber-600 cursor-pointer transition">
            <input type="checkbox" id="day2" value="2" class="accent-amber-600 w-4 h-4">
            <span class="text-slate-200">Terça-feira</span>
          </label>
          <label class="flex items-center gap-2 p-3 rounded-lg bg-[#0b0b0c] border border-[#2a2a2a] hover:border-amber-600 cursor-pointer transition">
            <input type="checkbox" id="day3" value="3" class="accent-amber-600 w-4 h-4" checked>
            <span class="text-slate-200">Quarta-feira</span>
          </label>
          <label class="flex items-center gap-2 p-3 rounded-lg bg-[#0b0b0c] border border-[#2a2a2a] hover:border-amber-600 cursor-pointer transition">
            <input type="checkbox" id="day4" value="4" class="accent-amber-600 w-4 h-4">
            <span class="text-slate-200">Quinta-feira</span>
          </label>
          <label class="flex items-center gap-2 p-3 rounded-lg bg-[#0b0b0c] border border-[#2a2a2a] hover:border-amber-600 cursor-pointer transition">
            <input type="checkbox" id="day5" value="5" class="accent-amber-600 w-4 h-4" checked>
            <span class="text-slate-200">Sexta-feira</span>
          </label>
          <label class="flex items-center gap-2 p-3 rounded-lg bg-[#0b0b0c] border border-[#2a2a2a] hover:border-amber-600 cursor-pointer transition">
            <input type="checkbox" id="day6" value="6" class="accent-amber-600 w-4 h-4">
            <span class="text-slate-200">Sábado</span>
          </label>
        </div>
      </div>
    </div>

    <!-- Mesocycle Selection -->
    <div class="card rounded-2xl p-6 mt-6">
      <h2 class="text-xl font-semibold text-amber-500 mb-4">Seleção de Mesociclos</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="mesocycleList">
        <!-- Will be populated by JavaScript -->
      </div>
    </div>

    <!-- Periodization Strategy -->
    <div class="card rounded-2xl p-6 mt-6" id="strategySection" style="display: none;">
      <h2 class="text-xl font-semibold text-amber-500 mb-4">Estratégia de Periodização</h2>
      
      <div class="space-y-3">
        <label class="flex items-start gap-3 p-4 rounded-lg bg-[#0b0b0c] border border-[#2a2a2a] hover:border-amber-600 cursor-pointer transition">
          <input type="radio" name="strategy" value="sequential" class="accent-amber-600 mt-1" checked>
          <div>
            <div class="font-semibold text-slate-200">Sequencial (Linear)</div>
            <div class="text-sm text-slate-400">Completa todos os ciclos do mesociclo A, depois B, etc. Ideal para progressão linear de força.</div>
          </div>
        </label>

        <label class="flex items-start gap-3 p-4 rounded-lg bg-[#0b0b0c] border border-[#2a2a2a] hover:border-amber-600 cursor-pointer transition">
          <input type="radio" name="strategy" value="alternated" class="accent-amber-600 mt-1">
          <div>
            <div class="font-semibold text-slate-200">Alternado (Ondulado)</div>
            <div class="text-sm text-slate-400">Alterna entre mesociclos semana a semana. Baseado em periodização ondulatória (DUP).</div>
          </div>
        </label>

        <label class="flex items-start gap-3 p-4 rounded-lg bg-[#0b0b0c] border border-[#2a2a2a] hover:border-amber-600 cursor-pointer transition">
          <input type="radio" name="strategy" value="block" class="accent-amber-600 mt-1">
          <div>
            <div class="font-semibold text-slate-200">Blocos (Block Periodization)</div>
            <div class="text-sm text-slate-400">Blocos de 2-4 semanas de cada mesociclo. Concentra adaptações específicas por período.</div>
          </div>
        </label>

        <label class="flex items-start gap-3 p-4 rounded-lg bg-[#0b0b0c] border border-[#2a2a2a] hover:border-amber-600 cursor-pointer transition">
          <input type="radio" name="strategy" value="pyramidal" class="accent-amber-600 mt-1">
          <div>
            <div class="font-semibold text-slate-200">Piramidal</div>
            <div class="text-sm text-slate-400">Progressão gradual de intensidade baixa para alta. Incorporação → Básico → Estabilizador → Pré-Otimização.</div>
          </div>
        </label>

        <label class="flex items-start gap-3 p-4 rounded-lg bg-[#0b0b0c] border border-[#2a2a2a] hover:border-amber-600 cursor-pointer transition">
          <input type="radio" name="strategy" value="concurrent" class="accent-amber-600 mt-1">
          <div>
            <div class="font-semibold text-slate-200">Concorrente</div>
            <div class="text-sm text-slate-400">Mistura sessões de diferentes mesociclos na mesma semana. Treino variado e adaptável.</div>
          </div>
        </label>
      </div>

      <div class="mt-4" id="blockSizeConfig" style="display: none;">
        <label class="block text-sm font-medium text-slate-300 mb-1">Tamanho dos Blocos (semanas)</label>
        <input type="number" id="blockSize" class="input-field w-full md:w-48 rounded-lg px-3 py-2" 
               value="3" min="1" max="8">
      </div>
    </div>

    <!-- Validation Messages -->
    <div id="validationMessage" class="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 w-full max-w-2xl px-4" style="display: none;"></div>

    <!-- Floating Action Bar -->
    <div class="fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50 w-full max-w-lg px-4">
      <div class="flex items-center gap-2 bg-[#0b0b0c] border border-[#2a2a2a] rounded-2xl px-3 py-2 shadow-2xl backdrop-blur-lg">
        <button id="mainActionBtn" class="btn-primary px-3 py-2 rounded-lg font-medium text-xs flex-1">
          Validar
        </button>
        <button id="loadDirectBtn" class="px-3 py-2 rounded-lg font-medium text-xs flex-1" disabled style="background: #6b7280; color: #9ca3af;">
          Carregar Localmente
        </button>
        <button id="resetBtn" class="btn-secondary px-3 py-2 rounded-lg font-medium text-xs flex-1">
          Limpar
        </button>
      </div>
    </div>

    <!-- Preview Section -->
    <div id="previewSection" class="card rounded-2xl p-6 mt-6" style="display: none;">
      <h2 class="text-xl font-semibold text-amber-500 mb-4">Pré-visualização do Plano</h2>
      <div id="previewContent" class="text-slate-300"></div>
    </div>
  </div>

  <script type="module" src="/assets/js/plan-generator.js"></script>
</body>
</html>
